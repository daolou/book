# ä»å°è£…ä¸€ä¸ª[æ—¥æœŸå¤„ç†](https://github.com/jsany/date)å·¥å…·åˆ°å‘å¸ƒä¸º npm å…¬å…±åŒ…çš„å…¨è¿‡ç¨‹

![npm](https://user-gold-cdn.xitu.io/2019/8/31/16ce76a4ac57fe6e?w=548&h=264&f=jpeg&s=11036)

> èƒŒæ™¯ï¼šé¡¹ç›®æ¯”è¾ƒå¤šï¼ŒåŒ…å«ä¸€äº›å…¬å…±çš„ä»£ç ï¼Œå¦‚ utils è¾…åŠ©å·¥å…·ï¼Œä¸ºé¿å…å¤åˆ¶ç²˜è´´ã€ç‰ˆæœ¬åŒæ­¥ï¼Œè¦å°†å…¶æŠ½ç¦»å‡ºæ¥å•ç‹¬ä½œä¸ºä¸€ä¸ªæ¨¡å—æ¥ç»´æŠ¤
> ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¼€å‘ï¼Œä»£ç æ€»æ˜¯åˆ†åˆ†åˆåˆï¼Œæ¯”äººçº¯ç²¹äº›ï¼Œåˆ†ä¹…å¿…åˆï¼Œåˆä¹…å¿…åˆ†ã€‚

åœ¨è¿™é‡Œå‘¢ï¼Œæˆ‘å°†è®²è§£ï¼Œä¸€æ­¥ä¸€æ­¥çš„ä»å°è£…ä¸€ä¸ªå·¥å…·ï¼ˆ[æ—¥æœŸå¤„ç†](https://github.com/jsany/date)ï¼‰ï¼Œåˆ°å‘å¸ƒåˆ° npm ä»“åº“ï¼ˆå…¬å…±åŒ…å…è´¹ï¼Œç§æœ‰åŒ…æ”¶è´¹ï¼‰ï¼Œå¸¦ä½ äº†è§£æ•´ä¸ªè¿‡ç¨‹ã€‚

## å‡†å¤‡

### ç¯å¢ƒ

> å¹³å°ï¼šMac os
>
> nodeï¼šv10.15.3
>
> gitï¼šv2.22.1
>
> ä»£ç ç®¡ç†ï¼šGitHub
>
> ç¼–è¾‘å™¨ï¼šVS Code
>
> > EditorConfig for VS Codeï¼šè·¨ç¼–è¾‘å™¨ç»Ÿä¸€é¡¹ç›®æ–‡ä»¶/æ–‡æœ¬æ ¼å¼
> >
> > ESLintï¼šeslint è§„èŒƒæ’ä»¶
> >
> > Prettier - Code formatterï¼šä»£ç ç¾åŒ–

### é¡¹ç›®ä¾èµ–

- `@babel/cli`
- `@babel/core`
- `@babel/preset-env`
- `@babel/register`
- `mocha`
- `eslint`
- `eslint-config-prettier`
- `eslint-plugin-prettier`
- `prettier`
- `husky`
- `lint-staged`

`@babelxxx` å°† es6+è¯­æ³•ç¼–è¯‘æˆ es5ï¼Œ`eslintxxx`ã€`prettier` ä»£ç ä¹¦å†™è§„èŒƒåŠç¾åŒ–ï¼Œ`husky`ã€`lint-staged` æäº¤é’©å­ï¼Œåœ¨æäº¤ä»£ç åˆ°ä»“åº“ä¹‹å‰åšç‚¹äº‹æƒ…

### é¡¹ç›®éª¨æ¶

```sh
.
â”œâ”€â”€ .github               --- github ç›¸å…³ä»£ç 
â”œâ”€â”€ es                    --- es6+ æºç 
â”œâ”€â”€ lib                   --- es5 æºç ï¼ˆç”±babelç¼–è¯‘è€Œæ¥ï¼‰
â”œâ”€â”€ test                  --- æµ‹è¯•ä»£ç 
â”œâ”€â”€ .babelrc              --- babel é…ç½®
â”œâ”€â”€ .editorconfig         --- editor é…ç½®
â”œâ”€â”€ .eslintignore         --- å¿½ç•¥eslintæ£€æŸ¥é…ç½®
â”œâ”€â”€ .eslintrc             --- eslint é…ç½®
â”œâ”€â”€ .gitignore            --- å¿½ç•¥gitæäº¤é…ç½®
â”œâ”€â”€ .prettierignore       --- å¿½ç•¥ä»£ç ç¾åŒ–é…ç½®
â”œâ”€â”€ .prettierrc           --- ä»£ç ç¾åŒ–é…ç½®
â”œâ”€â”€ LICENSE               --- è®¸å¯è¯
â”œâ”€â”€ README.md             --- é¡¹ç›®ä»‹ç»ï¼ˆæ¨èç”¨[readme-md-generator](https://github.com/kefranabg/readme-md-generator)ç”Ÿæˆï¼‰
â”œâ”€â”€ package-lock.json     --- pkg lockæ–‡ä»¶
â””â”€â”€ package.json          --- pkg æ–‡ä»¶
```

ç°åœ¨å¼€å§‹ä¸€æ­¥æ­¥åˆ›å»ºå‡ºä¸Šé¢çš„ç›®å½•ç»“æ„

- åœ¨ github ä¸Šåˆ›å»ºä¸€ä¸ª[organization](https://github.com/organizations/new)ï¼ˆç¬”è€…èµ·äº†ä¸ªå jsany ğŸ˜ï¼‰
- åœ¨ä¸Šé¢åˆ›å»ºçš„ç»„ç»‡é‡Œåˆ›å»ºï¼ˆnewï¼‰ä¸€ä¸ª public ä»“åº“ï¼ˆdateï¼‰
- åœ¨[npm](https://www.npmjs.cn/)ä¸Šä¹Ÿåˆ›å»ºä¸€ä¸ª[organization](https://www.npmjs.com/org/create)ï¼ˆç¬”è€…èµ·äº†ä¸ªå jsany ğŸ˜ï¼‰è¿™æ ·å¯ä»¥é¿å… publish æ—¶åŒ…åé‡å¤çš„é—®é¢˜
- åœ¨æœ¬åœ°ç™»é™† npm `npm login`
  ![npm_login](https://user-gold-cdn.xitu.io/2019/8/31/16ce7a7d6fd6d79c?w=675&h=244&f=png&s=83692)
- åœ¨æœ¬åœ°å·¥ä½œç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ date å¹¶è¿›å…¥ `mkdir date && cd date`
- åˆå§‹åŒ– git `git init`
- åˆå§‹åŒ– npm å·¥ç¨‹ `npm init --scope=jsany`
  ![npm_init](https://user-gold-cdn.xitu.io/2019/8/31/16ce7aa8551d4c3d?w=806&h=1079&f=png&s=141054)

  ```sh
  {
    "name": "@jsany/date",
    "version": "1.0.0",
    "description": "javascript date small",
    "main": "lib/index.js",
    "scripts": {
      "test": "mocha --require @babel/register"
    },
    "repository": {
      "type": "git",
      "url": "git+https://github.com/jsany/date.git"
    },
    "keywords": [
      "data",
      "js",
      "format",
      "transform"
    ],
    "author": "jiangzhiguo2010",  // æ³¨æ„è¿™é‡Œè¦å’Œnpmè´¦å·çš„ç”¨æˆ·åä¸€è‡´
    "license": "MIT", // å¼€æºè®¸å¯è¯
    "bugs": {
      "url": "https://github.com/jsany/date/issues"
    },
    "homepage": "https://github.com/jsany/date#readme"
  }
  ```

- ç”¨ vscode æ‰“å¼€é¡¹ç›®ï¼ˆæ–¹ä¾¿æ“ä½œï¼‰ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ `code .` ï¼ˆè¿™ä¸ªéœ€è¦å¦å¤–é…ç½®ï¼Œæƒ³å­¦çš„å¯ä»¥ç§èŠæˆ‘ï¼‰
- æ–°å»ºç›®å½• `.github`ï¼Œç”¨æ¥å­˜æ”¾ github ç›¸å…³çš„ä¸œè¥¿ï¼Œè¿™é‡Œæˆ‘ç”¨æ¥æ”¾ä¸€ä¸ªæäº¤è§„åˆ™æ ¡éªŒçš„è„šæœ¬ï¼Œ[è¯¦æƒ…è¯·çœ‹](https://juejin.im/post/5d137daef265da1bb13f4242)
- æ–°å»ºç›®å½• `es`ï¼Œç”¨æ¥å­˜æ”¾ es6+è¯­æ³•çš„æºç 
- æ–°å»ºç›®å½• `lib`ï¼Œç”¨æ¥å­˜æ”¾ es5 è¯­æ³•å¹¶æ”¯æŒ commonjs çš„æºç ï¼Œä¸éœ€è¦ç¼–å†™ï¼Œç”± babel ç¼–è¯‘ç”Ÿæˆ
- æ–°å»ºç›®å½• `test`ï¼Œç”¨æ¥å­˜æ”¾æµ‹è¯•ä»£ç 
- å®‰è£…ä¾èµ–
  `npm i --save-dev @babel/cli @babel/core @babel/preset-env @babel/register mocha eslint eslint-config-prettier eslint-plugin-prettier husky lint-staged prettier`
- æ–°å»ºæ–‡ä»¶ `.babelrc`ï¼Œ[babel é…ç½®](https://babeljs.io/docs/en/options)

  ```json
  {
    "presets": [
      [
        "@babel/preset-env",
        {
          "modules": "auto", // è‹¥æƒ³é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ umd
          "loose": true,
          "targets": {
            "esmodules": true,
            "node": true
          }
        }
      ]
    ]
  }
  ```

- æ–°å»ºæ–‡ä»¶ `.editorconfig`ï¼ˆå®‰è£… EditorConfig for VS Code æ’ä»¶åï¼Œä¹Ÿå¯é€šè¿‡ âŒ˜+â‡§+p ç„¶åè¾“å…¥ Generate .editorconfig ç”Ÿæˆï¼‰ï¼Œ[editorconfig é…ç½®ï¼Œè·¨ç¼–è¾‘å™¨ç»Ÿä¸€é¡¹ç›®æ–‡ä»¶/æ–‡æœ¬æ ¼å¼](https://editorconfig.org/)

  ```conf
  root = true

  [*]
  indent_style = space
  indent_size = 2
  end_of_line = lf
  charset = utf-8
  trim_trailing_whitespace = false
  insert_final_newline = false
  ```

- æ–°å»ºæ–‡ä»¶ `.eslintignore`ï¼Œ[eslint é…ç½®ï¼Œå¿½ç•¥æ£€æŸ¥](https://eslint.org/docs/user-guide/configuring#eslintignore)

  ```conf
  node_modules/
  ```

- æ–°å»ºæ–‡ä»¶ `.eslintrc`ï¼Œ[eslint é…ç½®](https://eslint.org/docs/user-guide/configuring)

  ```json
  {
    "env": {
      "browser": true,
      "es6": true,
      "node": true
    },
    "plugins": ["prettier"],
    "extends": ["eslint:recommended", "plugin:prettier/recommended"],
    "globals": {
      "Atomics": "readonly",
      "SharedArrayBuffer": "readonly"
    },
    "parserOptions": {
      "ecmaVersion": 2018,
      "sourceType": "module"
    },
    "rules": {
      "no-console": "off",
      "prettier/prettier": "error"
    }
  }
  ```

- æ–°å»ºæ–‡ä»¶ `.gitignore`ï¼Œ[å¿½ç•¥ git æäº¤é…ç½®](https://git-scm.com/docs/gitignore)

  ```conf
  # dependencies
  /node_modules
  /npm-debug.log*
  /yarn-error.log
  /yarn.lock
  /package-lock.json

  .DS_Store
  .idea/
  .vscode

  ```

- æ–°å»ºæ–‡ä»¶ `.prettierignore`ï¼Œ[å¿½ç•¥ä»£ç ç¾åŒ–é…ç½®](https://prettier.io/docs/en/ignore.html#ignoring-files)

  ```conf
  **/*.svg
  **/*.ejs
  **/*.html
  ```

- æ–°å»ºæ–‡ä»¶ `.prettierrc`ï¼Œ[ä»£ç ç¾åŒ–é…ç½®](https://prettier.io/docs/en/options.html)

  ```json
  {
    "singleQuote": true,
    "trailingComma": "es5",
    "printWidth": 100
  }
  ```

ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œ`package.json`å¤§ä½“ä¸Šæ˜¯è¿™æ ·å­ï¼š

```json
{
  "name": "@jsany/date",
  "version": "1.0.5", // åŒ…ç‰ˆæœ¬ï¼Œæ¯å‘å¸ƒä¸€æ¬¡ï¼Œéœ€æ›´æ–°
  "description": "javascript date small es5 es6+",
  "main": "lib/index.js", // commonjs å…¥å£æ–‡ä»¶ï¼Œä½¿ç”¨ require è¯­æ³•å¼•å…¥
  "module": "es/index.js", // esmodules å…¥å£æ–‡ä»¶ï¼Œä½¿ç”¨ import/require è¯­æ³•å¼•å…¥ï¼Œæ”¯æŒtree shaking ä¼˜åŒ–
  "files": ["lib", "es"], // è¿™ä¸ªfilesç”¨æ¥æŒ‡å®šéœ€è¦å‘å¸ƒçš„æ–‡ä»¶ï¼ˆå°†æ— ç”¨çš„æ–‡ä»¶å‰”é™¤æ‰ï¼Œå‡å°‘ä½“ç§¯ï¼Œä¸‹è½½å¿«ï¼Œä¹Ÿå¯ä»¥åœ¨`.npmignore`æ–‡ä»¶ä¸­æŒ‡å®šéœ€è¦å‰”é™¤çš„æ–‡ä»¶ï¼‰
  "scripts": {
    "test": "mocha --require @babel/register", // æµ‹è¯•å‘½ä»¤
    "compile": "babel es --out-dir lib" // babelç¼–è¯‘å‘½ä»¤
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/jsany/date.git"
  },
  "keywords": ["data", "js", "format", "transform"],
  "author": "jiangzhiguo2010",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/jsany/date/issues"
  },
  "homepage": "https://github.com/jsany/date",
  "devDependencies": {
    "@babel/cli": "^7.5.5",
    "@babel/core": "^7.5.5",
    "@babel/preset-env": "^7.5.5",
    "@babel/register": "^7.5.5",
    "mocha": "^6.2.0",
    "eslint": "^5.16.0",
    "eslint-config-prettier": "^4.3.0",
    "eslint-plugin-prettier": "^3.1.0",
    "husky": "^2.4.1",
    "lint-staged": "^8.2.0",
    "prettier": "^1.18.2"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "node .github/verifyCommitMsg"
    }
  },
  "lint-staged": {
    "*.{js,css,json,md}": ["prettier --write", "git add"]
  },
  "directories": {
    "test": "test"
  },
  "dependencies": {}
}
```

## å¼€å§‹ç¼–å†™ date æºç 

> date æä¾›æ ¼å¼åŒ–ï¼Œæ—¶åŒºè½¬æ¢ï¼Œè·å–æ—¶é—´æˆ³ç­‰åŠŸèƒ½

### æ ¼å¼åŒ–åŠŸèƒ½

æ€è·¯ï¼š(æ—¥æœŸ,æ ¼å¼)=>ç¬¦åˆé¢„æœŸæ ¼å¼çš„æ—¥æœŸï¼Œæ ¼å¼å¯ä»¥é€šè¿‡æ­£åˆ™åŒ¹é…æ¥è¿”å›å›ºå®šçš„æ ¼å¼ï¼ŒæŒ‰ç…§è¿™ä¸ªæ¥å®ç°ä¸€ä¸‹

æ–°å»º `dateFormat.js`

```javascript
/**
 * @description æ ¼å¼åŒ–æ—¥æœŸ
 * @param {(object|string)} date - æ—¥æœŸå¯¹è±¡/å­—ç¬¦ä¸²
 * @param {string} mask - æ—¥æœŸæ ¼å¼,é»˜è®¤ï¼šmask='yyyy-MM-dd HH:mm:ss'
 * @returns {string} è¿”å›æ ¼å¼åŒ–åçš„æ—¥æœŸ
 */
const dateFormat = (date, mask = 'yyyy-MM-dd HH:mm:ss') => {
  const d = typeof date !== 'object' ? new Date(date) : date;
  if (!d.getTime()) {
    throw new MyError({ code: '000', msg: ErrorCode['000'] });
  }
  const zeroize = (value, length = 2) => {
    value = String(value);
    let zeros = '';
    for (let i = 0, len = length - value.length; i < len; i++) {
      zeros += '0';
    }
    return zeros + value;
  };
  return mask.replace(
    /"[^"]*"|'[^']*'|\b(?:d{1,4}|m{1,4}|yy(?:yy)?|([hHMstT])\1?|[lLZ])\b/gi,
    function($0) {
      switch ($0) {
        case 'd':
          return d.getDate();
        case 'dd':
          return zeroize(d.getDate());
        case 'ddd':
          return ['Sun', 'Mon', 'Tue', 'Wed', 'Thr', 'Fri', 'Sat'][d.getDay()];
        case 'dddd':
          return ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][
            d.getDay()
          ];
        case 'M':
          return d.getMonth() + 1;
        case 'MM':
          return zeroize(d.getMonth() + 1);
        case 'MMM':
          return [
            'Jan',
            'Feb',
            'Mar',
            'Apr',
            'May',
            'Jun',
            'Jul',
            'Aug',
            'Sep',
            'Oct',
            'Nov',
            'Dec',
          ][d.getMonth()];
        case 'MMMM':
          return [
            'January',
            'February',
            'March',
            'April',
            'May',
            'June',
            'July',
            'August',
            'September',
            'October',
            'November',
            'December',
          ][d.getMonth()];
        case 'yy':
          return String(d.getFullYear()).substr(2);
        case 'yyyy':
          return d.getFullYear();
        case 'h':
          return d.getHours() % 12 || 12;
        case 'hh':
          return zeroize(d.getHours() % 12 || 12);
        case 'H':
          return d.getHours();
        case 'HH':
          return zeroize(d.getHours());
        case 'm':
          return d.getMinutes();
        case 'mm':
          return zeroize(d.getMinutes());
        case 's':
          return d.getSeconds();
        case 'ss':
          return zeroize(d.getSeconds());
        case 'l':
          return zeroize(d.getMilliseconds(), 3);
        case 'L':
          var m = d.getMilliseconds();
          if (m > 99) m = Math.round(m / 10);
          return zeroize(m);
        case 'tt':
          return d.getHours() < 12 ? 'am' : 'pm';
        case 'TT':
          return d.getHours() < 12 ? 'AM' : 'PM';
        case 'Z':
          return d.toUTCString().match(/[A-Z]+$/);
        // Return quoted strings with the surrounding quotes removed
        default:
          return $0.substr(1, $0.length - 2);
      }
    }
  );
};
export default dateFormat;
```

### è·å– utc æ—¶é—´æˆ³

æ€è·¯ï¼š(utc æ—¥æœŸ)=> utc æ—¶é—´æˆ³ï¼Œé€šè¿‡ `getTime` å¾—åˆ°å½“å‰æ—¶åŒºçš„æ—¶é—´æˆ³ï¼Œ`getTimezoneOffset` å¾—åˆ°å½“å‰æ—¶åŒºåç§»é‡ï¼ŒäºŒè€…å·®å€¼å³ utc æ—¶é—´æˆ³

æ–°å»º `utcTimestamp.js`

```javascript
/**
 * @description è·å–utcæ—¶é—´æˆ³
 * @param {string} date - utcæ—¥æœŸå¯¹è±¡/å­—ç¬¦ä¸²ï¼Œé»˜è®¤ï¼šå½“å‰æ—¶é—´
 * @returns {number} è¿”å›utcæ—¶é—´æˆ³
 */
const UTCTimestamp = (date = new Date()) => {
  return new Date(date).getTime() - new Date().getTimezoneOffset() * 60 * 1000;
};
export default UTCTimestamp;
```

### utc æ—¶é—´è½¬ä»»æ„æ—¶åŒºæ—¶é—´

æ€è·¯ï¼š(utc æ—¥æœŸ,æ—¶åŒºåç§»é‡,æ ¼å¼)=>ä»»æ„æ—¶åŒºæ—¶é—´ï¼Œé€šè¿‡ `getTime` å¾—åˆ°æ—¶é—´æˆ³ï¼Œå‡å»è¾“å…¥çš„åç§»é‡ï¼Œå³ä»»æ„æ—¶åŒºæ—¶é—´ï¼ŒæŒ‰ç…§è¿™ä¸ªæ¥å®ç°ä¸€ä¸‹

æ–°å»º `utc2target.js`

```javascript
/**
 * @description utcæ—¶é—´è½¬ç›®æ ‡æ—¶åŒºçš„æ—¶é—´ï¼Œé»˜è®¤ä¸ºutcæ—¶é—´è½¬æœ¬åœ°æ—¶é—´
 * @param {object|string} date - utcæ—¶é—´ï¼Œæ—¥æœŸå¯¹è±¡/å­—ç¬¦ä¸²
 * @param {number} timezone - ç›®æ ‡æ—¶åŒºï¼Œé»˜è®¤ï¼šæœ¬åœ°æ—¶åŒºtimezone=-480ï¼ˆä¸­å›½æ—¶åŒº+0800ï¼‰
 * @param {*} mask - æ—¥æœŸæ ¼å¼,é»˜è®¤ï¼šmask='yyyy-MM-dd HH:mm:ss'
 * @returns {string} è¿”å›ç›®æ ‡æ—¶åŒºçš„æ—¶é—´
 */
const UTC2Target = (
  date,
  timezone = new Date().getTimezoneOffset(),
  mask = 'yyyy-MM-dd HH:mm:ss'
) => {
  const utcTimestamp = new Date(date).getTime();
  if (!utcTimestamp) {
    throw new MyError({ code: '000', msg: ErrorCode['000'] });
  }
  date = dateFormat(new Date(utcTimestamp - timezone * 60 * 1000), mask);
  return date;
};

export default UTC2Target;
```

### ä»»æ„æ—¶åŒºæ—¶é—´è½¬ utc æ—¶é—´

æ€è·¯ï¼š(ä»»æ„æ—¶åŒºæ—¥æœŸ,æ—¶åŒºåç§»é‡,æ ¼å¼)=>utc æ—¶é—´ï¼Œé€šè¿‡ `getTime` å¾—åˆ°å½“å‰æ—¶åŒºæ—¶é—´æˆ³ï¼ŒåŠ ä¸Šè¾“å…¥çš„åç§»é‡ï¼Œå³ utc æ—¶é—´ï¼ŒæŒ‰ç…§è¿™ä¸ªæ¥å®ç°ä¸€ä¸‹

æ–°å»º `target2utc.js`

```javascript
/**
 * @description ç›®æ ‡æ—¶åŒºçš„æ—¶é—´è½¬utcæ—¶é—´ï¼Œé»˜è®¤ä¸ºæœ¬åœ°æ—¶é—´è½¬utcæ—¶é—´
 * @param {object|string} date - ç›®æ ‡æ—¶åŒºæ—¶é—´ï¼Œæ—¥æœŸå¯¹è±¡/å­—ç¬¦ä¸²
 * @param {number} timezone - ç›®æ ‡æ—¶åŒºï¼Œé»˜è®¤ï¼šæœ¬åœ°æ—¶åŒºtimezone=-480ï¼ˆä¸­å›½æ—¶åŒº+0800ï¼‰
 * @param {*} mask - æ—¥æœŸæ ¼å¼,é»˜è®¤ï¼šmask='yyyy-MM-dd HH:mm:ss'
 * @returns {string} è¿”å›ç›®æ ‡æ—¶åŒºçš„utcæ—¶é—´
 */
const Target2UTC = (
  date,
  timezone = new Date().getTimezoneOffset(),
  mask = 'yyyy-MM-dd HH:mm:ss'
) => {
  let targetTimestamp = new Date(date).getTime();
  if (!targetTimestamp) {
    throw new MyError({ code: '000', msg: ErrorCode['000'] });
  }
  date = dateFormat(new Date(targetTimestamp + timezone * 60 * 1000), mask);
  return date;
};

export default Target2UTC;
```

è¡¥å……ä¸€ä¸‹ä¸Šé¢ç”¨åˆ°çš„å·¥å…·å‡½æ•°/æ¨¡å—ï¼š

- `./helper/errCode.js`

  ```javascript
  export default {
    '000': 'Invalid Date',
  };
  ```

- `./helper/index.js`

  ```javascript
  /**
   * @description è·å–æ•°æ®çš„å…·ä½“ç±»å‹
   * @param {any} o - è¦åˆ¤æ–­çš„æ•°æ®
   * @returns {string} - è¿”å›è¯¥æ•°æ®çš„å…·ä½“ç±»å‹
   */
  export const getDataType = o => {
    // æ˜ å°„æ•°æ®ç±»å‹
    const map2DataType = {
      '[object String]': 'String',
      '[object Number]': 'Number',
      '[object Undefined]': 'Undefined',
      '[object Boolean]': 'Boolean',
      '[object Array]': 'Array',
      '[object Function]': 'Function',
      '[object Object]': 'Object',
      '[object Symbol]': 'Symbol',
      '[object Set]': 'Set',
      '[object Map]': 'Map',
      '[object WeakSet]': 'WeakSet',
      '[object WeakMap]': 'WeakMap',
      '[object Null]': 'Null',
      '[object Promise]': 'Promise',
      '[object NodeList]': 'NodeList',
      '[object Date]': 'Date',
      '[object FormData]': 'FormData',
    };
    o = Object.prototype.toString.call(o);
    if (map2DataType[o]) {
      return map2DataType[o];
    } else {
      return o.replace(/^\[object\s(.*)\]$/, '$1');
    }
  };

  /**
   * @description æ‰©å±•Error
   */
  export class MyError extends Error {
    constructor(props) {
      super(props);
      this.code = props.code || 0;
      this.msg = props.msg || 'default msg';
      this.name = 'MyError';
      this.message = JSON.stringify(props);
    }
  }
  ```

æ–°å»ºæ–‡ä»¶ `index.js` å°†æ–¹æ³•é›†ä¸­å¯¼å‡º

```javascript
export { default as dateFormat } from './dateFormat';
export { default as UTCTimestamp } from './utcTimestamp';
export { default as UTC2Target } from './utc2target';
export { default as Target2UTC } from './target2utc';
```

## æµ‹è¯• date åŠŸèƒ½ï¼ˆ[mocha](https://mochajs.org/)ï¼‰

mocha ä¸æ”¯æŒ esmodulesï¼Œå› æ­¤è¦ç”¨ babel è¿›è¡Œç¼–è¯‘ï¼Œåœ¨ cli å¢åŠ å‚æ•° `--require @babel/register` å³å¯

### es6+ æµ‹è¯•

åœ¨ test æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ `index.es.test.js`

```javascript
import { UTCTimestamp, UTC2Target, Target2UTC } from '../es/index';
const assert = require('assert');

const bj = '2019-01-01 08:00:00';
const ist = '2019-01-01 05:30:00';
const utc = '2019-01-01 00:00:00';
const utc_unix = 1546300800000;

describe('#@jsany/date(es)', () => {
  describe('#UTCTimestamp', () => {
    it('UTCTimestamp() should return true', () => {
      return assert.strictEqual(UTCTimestamp(utc, -480), utc_unix);
    });
  });
  describe('#UTC2Target', () => {
    it('UTC2Target() should return true', () => {
      return assert.strictEqual(UTC2Target(utc, -480), bj);
    });
    it('UTC2Target() should return true', () => {
      return assert.strictEqual(UTC2Target(utc, -330), ist);
    });
  });
  describe('#Target2UTC', () => {
    it('Target2UTC() should return true', () => {
      return assert.strictEqual(Target2UTC(bj, -480), utc);
    });
    it('Target2UTC() should return true', () => {
      return assert.strictEqual(Target2UTC(ist, -330), utc);
    });
  });
});
```

### es5 æµ‹è¯•

é¦–å…ˆè¿è¡Œç¼–è¯‘å‘½ä»¤ `npm run compile`

ç„¶ååœ¨ test æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ `index.lib.test.js`

```javascript
const { UTCTimestamp, UTC2Target, Target2UTC } = require('../lib/index');
const assert = require('assert');

const bj = '2019-01-01 08:00:00';
const ist = '2019-01-01 05:30:00';
const utc = '2019-01-01 00:00:00';
const utc_unix = 1546300800000;

describe('#@jsany/date(lib)', () => {
  describe('#UTCTimestamp', () => {
    it('UTCTimestamp() should return true', () => {
      return assert.strictEqual(UTCTimestamp(utc, -480), utc_unix);
    });
  });
  describe('#UTC2Target', () => {
    it('UTC2Target() should return true', () => {
      return assert.strictEqual(UTC2Target(utc, -480), bj);
    });
    it('UTC2Target() should return true', () => {
      return assert.strictEqual(UTC2Target(utc, -330), ist);
    });
  });
  describe('#Target2UTC', () => {
    it('Target2UTC() should return true', () => {
      return assert.strictEqual(Target2UTC(bj, -480), utc);
    });
    it('Target2UTC() should return true', () => {
      return assert.strictEqual(Target2UTC(ist, -330), utc);
    });
  });
});
```

è¿è¡Œæµ‹è¯•ï¼š`npm run test`

![npm_test](https://user-gold-cdn.xitu.io/2019/9/2/16cf208437971390?w=857&h=610&f=png&s=80068)

## ç¼–å†™ README

è¿è¡Œ `npx readme-md-generator`ï¼Œåˆ›å»º `README.md` æ¨¡ç‰ˆæ–‡ä»¶ï¼Œç„¶åè¡¥å…¨

tipsï¼šè¿™ç§![npm_version](https://img.shields.io/npm/v/@jsany/date.svg)å°å›¾æ ‡å¯ä»¥åœ¨[https://shields.io](https://shields.io)ç”Ÿæˆ

## æäº¤ä»£ç è‡³ github

- `git remote add origin git@github.com:jsany/date.git`
- `git push -u origin master`

## å‘å¸ƒ

é¦–å…ˆç¡®è®¤è‡ªå·±å·²ç™»é™†

![npm_whoami](https://user-gold-cdn.xitu.io/2019/9/2/16cf20b289415c12?w=666&h=109&f=png&s=16251)

æ£€æŸ¥ `package.json` æ–‡ä»¶ï¼Œè®°ä½æ¯æ¬¡æ›´æ”¹å‘å¸ƒï¼Œéƒ½åº”è¯¥æ˜¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œæ²¡é—®é¢˜åå¼€å§‹å‘å¸ƒï¼ˆå…¬å¼€åŒ… --access=publicï¼‰ï¼Œ
ç”±äºå’±ä»¬æ˜¯åœ¨ä¸€ä¸ªç»„ç»‡ï¼ˆorganizationï¼‰ä¸‹å‘åŒ…ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒ
åŒ…åä¼šé‡å¤çš„é—®é¢˜äº†ï¼Œæ— éœ€ç”¨ `npm view` åšæ£€æŸ¥äº†

`npm publish --access=public`

![npm_publish](https://user-gold-cdn.xitu.io/2019/9/2/16cf22b224804c11?w=818&h=629&f=png&s=131554)

**[æŸ¥çœ‹æºç ](https://github.com/jsany/date/tree/master/es)**

ã€å‚è€ƒã€‘ï¼š

1. <https://www.npmjs.cn>
2. <https://babeljs.io/docs/en>
3. <https://eslint.org>
4. <https://git-scm.com>
5. <https://prettier.io>
6. <https://mochajs.org>
7. <https://shields.io>

===ğŸ§ğŸ§ _æ–‡ä¸­ä¸è¶³ï¼Œæ¬¢è¿æŒ‡æ­£_ ğŸ¤ªğŸ¤ª===
